name: pages

# å·¥ä½œæµç¨‹è§¦å‘çš„æ—¶æœºï¼Œè¿™é‡Œæ˜¯å½“ä¸€ä¸ªç‰ˆæœ¬æ ‡ç­¾æ¨é€åˆ°ä»“åº“æ—¶è§¦å‘
on:
  push:
    branches:
      - main

jobs:
  process:
    name: all process
    runs-on: ubuntu-latest
    # è¿™ä¸ªä»»åŠ¡çš„æ­¥éª¤
    steps:
      # æ‹‰å–é¡¹ç›®ä»£ç 
      - uses: actions/checkout@v2
      - name: Set env
        run: echo ::set-output name=RELEASE_VERSION::${GITHUB_REF#refs/*/}
      # å»ºç«‹ java ç¯å¢ƒ
      - name: Setup Java JDK
        uses: actions/setup-java@v2
        with:
          distribution: 'zulu'
          java-version: '11'
      # å»ºç«‹ Flutter ç¯å¢ƒ
      - name: Flutter action
        uses: subosito/flutter-action@v1.5.3
        with:
          channel: "stable"
          flutter-version: "3.3.0"
      # æ‰“åŒ…
      - run: flutter pub get
      - run: flutter build web --web-renderer html

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: "build/web"
          token: ${{ secrets.TOKEN }}
          git-config-name: "action"
          git-config-email: "bot@action.com"